---
title: 路网更新
permalink: /tutorials/emme/network_add/
---




# 背景与路线
## 背景与问题
emme软件因为其在路网编辑方面功能弱，门槛高，技术复杂；在遇到局部路网更新，线路线型调整，属性赋值粘贴等问题时，工程技术人员往往需要在这方面投入巨大工作量，基于此，本文提出一种更新emme工程技术网络的方法。
## 技术路线与方法

- 三方软件编辑道路网络：可使用arcgis,gsis,Transcad等GIS软件
- 通过三方软件或者自定义脚本接口，将路网文件转化为中间脚本文件：线路拓扑及线型走向文件；
- 新建test sceneria 场景，通过EMME modduller工具文件，导入拓扑和线型文件；（也可以直接通过emme工具，将shp文件导入到emme中）；
- 坐标系转化，将导入的文件从经纬度左边转化为投影坐标；
- 利用modeller，将文件导出；
- 更新场景，将拓扑和线型文件导入新场景中，
- 手动编辑局部区域网络；
- 道路额外属性更新；# 基础网络处理

- 1）基于TC、arcgis、路网处理
- 2）EMME新建空工程；
- 3）使用工具shapefile to emme conversion
- ![image.png](./6.5.5-局部路网更新.assert/1668420387592-db471b6c-9e0c-444d-8b95-1ecec0fb12d6.png)

- 4）选择shp文件
- ![image.png](./6.5.5-局部路网更新.assert/1668423643701-aabd6c92-b481-4bcc-96f3-aa8384b75998.png)

- 5）属性选择
- ![image.png](./6.5.5-局部路网更新.assert/1668424615300-d63b896f-6ff6-4915-a233-27535c4d8f58.png)

- 6）中间文件保存
- node id编号，最好绕过已有编号区段；
- 基础文件保存basenet.in，点层和线层文件；
- shape线型文件保存:link_shp.db；
- ![image.png](./6.5.5-局部路网更新.assert/1668424682220-36da41d4-c144-4b02-807f-11790a6c103a.png)
# emme文件导入和转换
1）定义方式类型
![image.png](./6.5.5-局部路网更新.assert/1668424985114-00ec168a-db82-499c-8221-b8d500a1e585.png)

2）导入基础base文件，见上面basenet.in
![image.png](./6.5.5-局部路网更新.assert/1668425099945-36acbf3d-67aa-42e4-a89e-2351f35a9fba.png)

3）修改线型数据：

- 将上文link_shp.db文件拷贝到emme工程文件目录Database下；
- 将link_shp.db文件名称修改为对于sceneria_id的名称，并覆盖之前的db文件；
- ![image.png](./6.5.5-局部路网更新.assert/1668425292913-2aa96018-2e5e-4477-be4d-eedd18f8dced.png)
4）线型文件坐标系转换
从shp导入的坐标系为WGS84的经纬度坐标要转化为墨卡托坐标系，转化方法如下：
源坐标：WGS1984.PRJ
目标坐标系：WGS 1984 UTM Zone 49N.prj
路径：emme安装路径下，coordinate systems/project coordinate systems/
![image.png](./6.5.5-局部路网更新.assert/1668425498359-506cb2df-528a-4c89-9fe9-3da629ecd630.png)

导入结果：
![image.png](./6.5.5-局部路网更新.assert/1668425757971-e884f2ed-bf31-4f3f-a43e-a485d24b9257.png)

​
# emme文件导出
1）完成坐标系转化后导出为中间文件

- 导出基础文件![image.png](./6.5.5-局部路网更新.assert/1668425855420-a66ff491-b20b-422c-aead-bfb425c8b3b4.png)


- 导出线型文件
- ![image.png](./6.5.5-局部路网更新.assert/1668426045058-7428dbda-270e-436d-9f83-847ee6f75b05.png)
2）新工程场景中导入基础文件
![image.png](./6.5.5-局部路网更新.assert/1668426225407-7ed6057f-98c8-4b4f-99c5-19df5e9fa7a4.png)

3）导入线型文件
![image.png](./6.5.5-局部路网更新.assert/1668426314147-d84d7753-baaa-4140-a89b-f0e45f668dbf.png)

# 手动进行边界修改
